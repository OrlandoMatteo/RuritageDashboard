/*!
 * Start Bootstrap - SB Admin 2 v4.1.0 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function siteOfInterestStats(){var e=selectRMR.selected();bounds=main_map.getBounds();$.ajax({method:"GET",url:api_url+"/querysites",data:{bounds:JSON.stringify(bounds),rm_r:JSON.stringify(e)},dataType:"json",success:function(e){placeSite(x=e),updateSiteStats(e)}})}function onEachSite(e,t){t.bindTooltip("Site of interest");var i='<h4 id="title">'+e.properties.NAME+"</h4>",r="";r=e.properties.RM_R_CODE.includes("RM")?"Role Model":"Replicator";var n=i+' <hr class="customHR"><b style="color:'+rmRColor(e.properties.RM_R_CODE)+'">'+r+"-"+rmRDict[e.properties.RM_R_CODE]+'</b><font size="2"><div id="extra"><font size="2"><p>';null!=e.properties.NOTES&&null!=e.properties.NOTES&&(n+=e.properties.NOTES),null!=e.properties.CHAR_SIA&&null!=e.properties.CHAR_SIA&&(n=n+"<br>"+charDict[e.properties.CHAR_SIA]),null!=e.properties.NOTE2&&null!=e.properties.NOTE2&&(n=n+"<br>Note: "+e.properties.NOTE2),n=(n+="</p></div>").replace(/undefined/g,"Not available"),t.bindPopup(n),t.on("click",function(e){main_map.setView(e.target._latlngs[0][0]),clickedSite&&clickedSite.setStyle({weight:3});e.target;e.target.setStyle({weight:12}),clickedSite=e.target,clickedBuilding=null})}function placeSite(e){for(var t=0;t<e.sites.length;t++){x=e.sites[t],L.geoJson(x,{onEachFeature:onEachSite}).addTo(main_map).setStyle({color:"#fa3939"})}}function updateSiteStats(e){$("#featureCount")[0].innerHTML=e.featureCount,$("#unescoSites")[0].innerHTML=e.unescoSites,$("#nationalSites")[0].innerHTML=e.nationalSites,$("#otherSites")[0].innerHTML=e.otherSites,centroid=[e.centroid.geometry.coordinates[1],e.centroid.geometry.coordinates[0]],main_map.setView(centroid,8)}