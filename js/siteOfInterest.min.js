/*!
 * Start Bootstrap - SB Admin 2 v4.1.0 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function siteOfInterestStats(){bounds=main_map.getBounds();$.ajax({method:"GET",url:api_url+"/querysites",data:{},dataType:"json",success:function(e){placeSite(x=e),updateSiteStats(e),updateSitesTable(e)}})}function onEachSite(e,t){t.bindTooltip("Site of interest");var i='<h4 id="title">'+e.properties.NAME+"</h4>",r="";r=e.properties.RM_R_CODE.includes("RM")?"Role Model":"Replicator";var a=i+' <hr class="customHR"><b style="color:'+rmRColor(e.properties.RM_R_CODE)+'">'+r+"-"+rmRDict[e.properties.RM_R_CODE]+'</b><font size="2"><div id="extra"><font size="2"><p>';null!=e.properties.NOTES&&null!=e.properties.NOTES&&(a+=e.properties.NOTES),null!=e.properties.CHAR_SIA&&null!=e.properties.CHAR_SIA&&(a=a+"<br>"+charDict[e.properties.CHAR_SIA]),null!=e.properties.NOTE2&&null!=e.properties.NOTE2&&(a=a+"<br>Note: "+e.properties.NOTE2),a=(a+="</p></div>").replace(/undefined/g,"Not available"),t.bindPopup(a),t.on("click",function(e){main_map.setView(e.target._latlngs[0][0]),clickedSite&&clickedSite.setStyle({weight:3});e.target;e.target.setStyle({weight:12}),clickedSite=e.target,clickedBuilding=null})}function placeSite(e){for(var t=0;t<e.sites.length;t++){x=e.sites[t],L.geoJson(x,{onEachFeature:onEachSite}).addTo(main_map).setStyle({color:"#fa3939"})}}function updateSiteStats(e){}function updateSitesTable(e){updatedTable="";for(var t=0;t<e.sites.length;t++)newEntry="<tr><td>"+e.sites[t].properties.NAME+"</td><td>"+e.sites[t].properties.RM_R_CODE+"</td><td>"+protectedDict[e.sites[t].properties.REG_STATUS]+"</td><td>"+charDict[e.sites[t].properties.CHAR_SIA]+"</td></tr>",updatedTable+=newEntry;$("#tableBody")[0].innerHTML=updatedTable,$("#dataTable").DataTable()}