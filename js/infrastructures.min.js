/*!
 * Start Bootstrap - SB Admin 2 v4.1.0 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function infrastructureStats(){var r=selectRMR.selected();$.ajax({method:"GET",url:api_url+"/queryinfrastr",data:{rm_r:JSON.stringify(r)},dataType:"json",success:function(r){placeInfrastr(r),updateInfraStats(r)}})}function placeInfrastr(r){for(var e=0;e<r.infrastructures.length;e++){x=r.infrastructures[e];L.geoJson(x,{onEachFeature:onEachInfrastr}).addTo(main_map)}}function InfrastrStyle(r,e){return L.marker(e,{riseOnHover:!0})}function onEachInfrastr(r,e){e.bindTooltip("Infrastructure",{sticky:!0});var t='<h4 id="title">'+r.properties.N_NAME+"</h4>",n=(t=t+'<b style="color:'+rmRColor(r.properties.RM_R_CODE)+'">'+rmRDict[r.properties.RM_R_CODE]+'</b><p><h6>Description</h6><font size="2">'+r.properties.INF_DESCRI+'</p><hr class="customHR">')+'<br><font size="2"><div id="extra"><font size="2"><p>';null!=r.properties.INF_TYPE&&null!=r.properties.INF_TYPE&&(n=n+"Infrastructure Type: "+infraTypeDict[r.properties.INF_TYPE]),null!=r.properties.INF_CAT&&null!=r.properties.INF_CAT&&(n=n+"<br>Category: "+r.properties.INF_CAT),null!=r.properties.NOTES&&null!=r.properties.NOTES&&(n=n+"<br>Notes: "+r.properties.NOTES),n=(n+="</p></div>").replace(/undefined/g,"Not available"),e.bindPopup(n)}function updateInfraStats(r){centroid=[r.centroid.geometry.coordinates[1],r.centroid.geometry.coordinates[0]],main_map.setView(centroid,8),console.log(r.types);var e=$.map(r.types,function(r,e){return r}),t=$.map(r.types,function(r,e){return infraTypeDict[e]});options={series:e,labels:t,chart:{type:"donut",height:"300"}},new ApexCharts(document.querySelector("#inftypechart"),options).render()}