/*!
 * Start Bootstrap - SB Admin 2 v4.1.0 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function eventsStats(){var e=selectRMR.selected();$.ajax({method:"GET",url:api_url+"/queryevents",data:{rm_r:JSON.stringify(e)},dataType:"json",success:function(e){placeEvents(e),updateStatsEvents(e)}})}function placeEvents(e){for(var t=0;t<e.events.length;t++){x=e.events[t];L.geoJson(x,{pointToLayer:EventsStyle,onEachFeature:onEachEvent}).addTo(main_map)}}function EventsStyle(e,t){L.icon({iconUrl:"img/Events.png",iconSize:[42,42]});return L.marker(t,{riseOnHover:!0})}function onEachEvent(e,t){t.bindTooltip("Event");var r='<h4 id="title">'+e.properties.EVE_NAME+"</h4>"+'<br><font size="2"><hr class="customHR"><div id="extra"><font size="2"><b style="color:'+rmRColor(e.properties.RM_R_CODE)+'">'+rmRDict[e.properties.RM_R_CODE]+"</b><p>";null!=e.properties.EVE_DESCRI&&null!=e.properties.EVE_DESCRI&&(r=r+"Description: "+e.properties.EVE_DESCRI),null!=e.properties.EVE_TYPE&&null!=e.properties.EVE_TYPE&&(r=r+"<br>Type: "+eventTypeDict[e.properties.EVE_TYPE]),null!=e.properties.EVE_DATING&&null!=e.properties.EVE_DATING&&(r=r+"<br>"+e.properties.EVE_DATING),null!=e.properties.NOTES&&null!=e.properties.NOTES&&(r=r+"<br>Notes: "+e.properties.NOTES),r=(r+="</p></div>").replace(/undefined/g,"Not available"),t.bindPopup(r)}function updateStatsEvents(e){$("#summer")[0].innerHTML=e.summer,$("#winter")[0].innerHTML=e.winter,$("#spring")[0].innerHTML=e.spring,$("#autumn")[0].innerHTML=e.autumn,centroid=[e.centroid.geometry.coordinates[1],e.centroid.geometry.coordinates[0]],main_map.setView(centroid,8)}