/*!
 * Start Bootstrap - SB Admin 2 v4.1.0 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function buildingsStats(){$.ajax({method:"GET",url:api_url+"/querybuildings",data:{},dataType:"json",success:function(n){placeBuildings(n),updateBuildingsStats(n)}})}function placeBuildings(n){for(var t=0;t<n.buildings.length;t++){x=n.buildings[t];L.geoJson(x,{pointToLayer:buildingStyle,onEachFeature:onEachBuilding}).addTo(main_map)}}function buildingStyle(n,t){L.icon({iconUrl:"img/Buildings.png",iconSize:[42,42]});return L.marker(t,{riseOnHover:!0})}function onEachBuilding(n,t){var e=(n.properties.N_NAME,n.properties.BUI_DESCRI);e=buildingSidebar(n.properties),t.bindPopup(e)}function buildingSidebar(n){content="",name="",name=null!=n.O_NAME?n.O_NAME:null!=n.N_NAME?n.N_NAME:n.NAME,content=content+'<h4 id="title">'+name+"</h4>",null!=n.RM_R_IM1&&(imageNames=n.RM_R_IM1.split(","),content=content+'<img src="'+api_url+"/images?RM_R_CODE="+n.RM_R_CODE+"&imageName="+n.RM_R_IM1+'" width=250px>'),content+='<hr class="customHR"><br><font size="2"><div id="extra"><font size="2">';var t="";return t=n.RM_R_CODE.includes("RM")?"Role Model":"Replicator",content=content+'<b style="color:'+rmRColor(n.RM_R_CODE)+'">'+t+"-"+rmRDict[n.RM_R_CODE]+"</b>",null!=n.BUI_DESCRI&&null!=n.BUI_DESCRI&&(content=content+"<p><b>Description</b><br>"+n.BUI_DESCRI+"<br>"),null==n.O_FUNCTION&&null==n.O_FUNCTION||(content=content+"<br>Original function: "+ofDict[n.O_FUNCTION]),null==n.N_FUNCTION&&null==n.N_FUNCTION||(content=content+"<br>New function: "+nfDict[n.N_FUNCTION]),null==n.BUI_TYP&&null==n.BUI_TYP||(content=content+"<br>Type: "+n.BUI_TYP),null==n.ACTIVITY&&null==n.ACTIVITY||(content=content+"<br>Activity: "+activityBuildDict[n.ACTIVITY]),null==n.NOTES&&null==n.NOTES||(content=content+"<br>Notes:"+n.NOTES),null==n.NOTE2&&null==n.NOTE2||(content=content+". "+n.NOTE2),content+="</p>",content=content.replace(/null/g,"Not available"),content=content.replace(/undefined/g,"Not available"),content}function updateBuildingsStats(n){$("#protected")[0].innerHTML=n.protected,$("#cultural")[0].innerHTML=n.cultural,$("#farms")[0].innerHTML=n.farms,$("#other")[0].innerHTML=n.other}